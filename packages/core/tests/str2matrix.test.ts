import { expect, test, describe } from 'vitest'
import { str2matrix, refrectX, refrectY } from '../src/matrix'

describe('str2matrix test', () => {
  test('paku-0', async () => {
    const tests = [
      `
  1111
 111
111
111
 111
  1111
`,
      `
  111
 11111
1111
1111
 11111
  111
`,
      `
  11
 1111
111111
111111
 1111
  11
`
    ]
    const wants = [
      [
        [0, 0, 1, 1, 1, 1],
        [0, 1, 1, 1, 0, 0],
        [1, 1, 1, 0, 0, 0],
        [1, 1, 1, 0, 0, 0],
        [0, 1, 1, 1, 0, 0],
        [0, 0, 1, 1, 1, 1]
      ],
      [
        [0, 0, 1, 1, 1, 0],
        [0, 1, 1, 1, 1, 1],
        [1, 1, 1, 1, 0, 0],
        [1, 1, 1, 1, 0, 0],
        [0, 1, 1, 1, 1, 1],
        [0, 0, 1, 1, 1, 0]
      ],
      [
        [0, 0, 1, 1, 0, 0],
        [0, 1, 1, 1, 1, 0],
        [1, 1, 1, 1, 1, 1],
        [1, 1, 1, 1, 1, 1],
        [0, 1, 1, 1, 1, 0],
        [0, 0, 1, 1, 0, 0]
      ]
    ]

    tests.forEach((test, i) => {
      const expected = str2matrix(test)
      expect(expected).toEqual(wants[i])
    })
  })
})

describe('refrect test', () => {
  test('refrecrY', async () => {
    const tests = [
      `
  1111
 111
111
111
 111
  1111
`,
      `
  111
 11111
1111
1111
 11111
  111
`,
      `
  11
 1111
111111
111111
 1111
  11
`
    ]
    const wants = [
      [
        [1, 1, 1, 1, 0, 0],
        [0, 0, 1, 1, 1, 0],
        [0, 0, 0, 1, 1, 1],
        [0, 0, 0, 1, 1, 1],
        [0, 0, 1, 1, 1, 0],
        [1, 1, 1, 1, 0, 0]
      ],
      [
        [0, 1, 1, 1, 0, 0],
        [1, 1, 1, 1, 1, 0],
        [0, 0, 1, 1, 1, 1],
        [0, 0, 1, 1, 1, 1],
        [1, 1, 1, 1, 1, 0],
        [0, 1, 1, 1, 0, 0]
      ],
      [
        [0, 0, 1, 1, 0, 0],
        [0, 1, 1, 1, 1, 0],
        [1, 1, 1, 1, 1, 1],
        [1, 1, 1, 1, 1, 1],
        [0, 1, 1, 1, 1, 0],
        [0, 0, 1, 1, 0, 0]
      ]
    ]

    tests.forEach((test, i) => {
      const arr = str2matrix(test)
      const expected = refrectY(arr)
      expect(expected).toEqual(wants[i])
    })
  })
  test('refrectX', async () => {
    const tests = [
      `
  1111
 111
111
111
 111
  1111
`,
      `
  111
 11111
1111
1111
 11111
  111
`,
      `
  11
 1111
111111
111111
 1111
  11
`,
      `
1
 1
  1
`
    ]
    const wants = [
      [
        [0, 0, 1, 1, 1, 1],
        [0, 1, 1, 1, 0, 0],
        [1, 1, 1, 0, 0, 0],
        [1, 1, 1, 0, 0, 0],
        [0, 1, 1, 1, 0, 0],
        [0, 0, 1, 1, 1, 1]
      ],
      [
        [0, 0, 1, 1, 1, 0],
        [0, 1, 1, 1, 1, 1],
        [1, 1, 1, 1, 0, 0],
        [1, 1, 1, 1, 0, 0],
        [0, 1, 1, 1, 1, 1],
        [0, 0, 1, 1, 1, 0]
      ],
      [
        [0, 0, 1, 1, 0, 0],
        [0, 1, 1, 1, 1, 0],
        [1, 1, 1, 1, 1, 1],
        [1, 1, 1, 1, 1, 1],
        [0, 1, 1, 1, 1, 0],
        [0, 0, 1, 1, 0, 0]
      ],
      [
        [0, 0, 1],
        [0, 1, 0],
        [1, 0, 0]
      ]
    ]

    tests.forEach((test, i) => {
      const arr = str2matrix(test)
      const expected = refrectX(arr)
      expect(expected).toEqual(wants[i])
    })
  })
})
